(()=>{"use strict";let e=[{url:"../img/banner1.png"},{url:"../img/banner2.png"},{url:"../img/banner3.png"}];document.addEventListener("DOMContentLoaded",(function(){!function(){let t=document.querySelector(".slider__images"),n=document.querySelector(".slider__dots");function o(e){t.querySelector(".active").classList.remove("active"),t.querySelector(".n"+e).classList.add("active"),n.querySelector(".active").classList.remove("active"),n.querySelector(".n"+e).classList.add("active")}e.forEach(((n,o)=>{let i=`<div class="image n${o} ${0===o?"active":""}" style="background-image:url(${e[o].url});" data-index="${o}"></div>`;t.innerHTML+=i})),e.forEach(((e,t)=>{let o=`<div class="slider__dots-item n${t} ${0===t?"active":""}" data-index="${t}"></div>`;n.innerHTML+=o})),n.querySelectorAll(".slider__dots-item").forEach((e=>{e.addEventListener("click",(function(){o(this.dataset.index)}))})),setInterval((()=>{let n=+t.querySelector(".active").dataset.index;o(n===e.length-1?0:n+1)}),5e3)}(),o.forEach((e=>{e.addEventListener("click",(()=>{c.innerHTML="",document.querySelector(".nav-categories__item--active").classList.remove("nav-categories__item--active"),e.classList.add("nav-categories__item--active"),r=e.innerHTML,localStorage.setItem("actualCategory",r),localStorage.getItem("actualCategory")?r=localStorage.getItem("actualCategory"):localStorage.setItem("actualCategory",r),d()}))})),n.innerHTML=localStorage.getItem("countGoods"),n.innerHTML>=1?t.style.display="block":t.style.display="none",d()}));let t=document.querySelector(".quantityGoods"),n=document.querySelector(".quantityGoods__number"),o=document.querySelectorAll(".nav-categories__item"),i=0,a=0,s=[],r="Architecture";const l="AIzaSyA1Cmeh7H_dL8q8XuybP3IH6jzbHjOuGNU";let c=document.querySelector(".books");function d(){i++;const e=localStorage.getItem("indexBook"),o=JSON.parse(e);fetch(`https://www.googleapis.com/books/v1/volumes?q="subject:${r}"&key=${l}&printType=books&startIndex=${a}&maxResults=6&langRestrict=en`).then((e=>e.json())).then((e=>{for(let t of e.items){const e=`\n                      <div class="book" data-index=${t.id}>\n                        <img class="book-cover" src=${t.volumeInfo.imageLinks?t.volumeInfo.imageLinks.thumbnail:"../img/noCoverBook.svg"} alt="book-cover"/>\n                        <div class="book-information" >\n                          <span class="book-author">${t.volumeInfo.authors}</span>\n                          <h2 class="book-title">${t.volumeInfo.title}</h2>\n                          <div class="rating">\n                            <div class="rating-items">\n                              <img src=${t.volumeInfo.averageRating>0?"../img/star_filled.svg":"../img/star.svg"}  alt="rating" width="12" height="12"/>\n                              <img src=${t.volumeInfo.averageRating>1?"../img/star_filled.svg":"../img/star.svg"}  alt="rating" width="12" height="12"/>\n                              <img src=${t.volumeInfo.averageRating>2?"../img/star_filled.svg":"../img/star.svg"}  alt="rating" width="12" height="12"/>\n                              <img src=${t.volumeInfo.averageRating>3?"../img/star_filled.svg":"../img/star.svg"}  alt="rating" width="12" height="12"/>\n                              <img src=${t.volumeInfo.averageRating>4?"../img/star_filled.svg":"../img/star.svg"}  alt="rating" width="12" height="12"/>\n                            </div>\n                            <span class="review">${t.volumeInfo.ratingsCount?t.volumeInfo.ratingsCount+" "+(1===t.volumeInfo.ratingsCount?"review":"reviews"):""}</span>               \n                          </div>\n                          <p class="book-description">${t.volumeInfo.description||""}</p>\n                          <span class="book-price">${t.saleInfo.listPrice?"$"+t.saleInfo.listPrice.amount:""}</span>\n                          <button class="button book-buy">Buy now</button>\n                        </div>\n                      </div>\n                      `;c.innerHTML+=e}const r=document.createElement("button");function l(){localStorage.setItem("countGoods",n.innerHTML)}function g(){localStorage.getItem("countGoods")?n.innerHTML=localStorage.getItem("countGoods"):localStorage.setItem("countGoods",n.innerHTML)}r.classList.add("button","load-button"),r.innerHTML="Load more",c.append(r),r.addEventListener("click",(()=>{a+=6,d(),r.classList.add("hidden")})),document.querySelectorAll(".book-buy").forEach((e=>{const a=e.closest(".book").dataset.index;if(e.addEventListener("click",(()=>{if("Buy now"==e.innerHTML){e.innerHTML="IN THE CART",s.push(a),n.innerHTML=Number(n.innerHTML)+1,n.innerHTML>0?t.style.display="block":t.style.display="none";const o=JSON.stringify(s);localStorage.setItem("indexBook",o),l(),g()}else{e.innerHTML="Buy now";const o=localStorage.getItem("indexBook");if(o){const e=JSON.parse(o);s=e.filter((e=>e!==a))}n.innerHTML=Number(n.innerHTML)-1,n.innerHTML>0?t.style.display="block":t.style.display="none",l(),g()}const o=JSON.stringify(s);localStorage.setItem("indexBook",o)})),o)for(i=0;i<o.length;i++)a===o[i]&&(e.innerHTML="In the cart",s=o)}))}))}})();